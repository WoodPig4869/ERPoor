import{k as ie,c as w,h as O,l as Ce,g as Pe,a as Ae,m as R,n as Ne,r as V,w as S,p as Ue,q as pt,t as ht,u as he,v as Y,x as ge,y as gt,z as te,A as _e,B as Ie,C as ye,D as yt,E as bt,G as wt,H as _t,I as kt,J as Ct,K as Vt,L as qt,M as St,N as Bt,O as oe,o as Ve,P as He,Q as Qe,d as ue,R as N,S as M,U as c,V as Re,f as i,W as P,X as L,Y as A,Z as xt,_ as We,$ as ne,a0 as B,a1 as j,a2 as Xe,a3 as F,a4 as Ye,a5 as T,a6 as je,a7 as Dt,a8 as It,b as Qt,a9 as Lt,aa as Tt,ab as Le,F as Te,ac as ze,ad as zt,ae as Mt,af as Ft}from "./index-CLxRvZYn.js";import{c as Ot,b as ae,Q as Ke,a as K,d as Z,e as Et,f as Me,g as $t,h as Pt}from "./QSelect-BUHZvF4Q.js";import{Q as le,S as At}from "./ShippingForm-Bl4cHboV.js";import{Q as Nt,a as Ut,b as Ht}from "./QLayout-D-mfyFZX.js";import{Q as Ze}from "./QForm-BGxHd8hi.js";import{api as ke}from "./axios-DLpAuOl3.js";import{u as Ge}from "./use-quasar-DkPXY9po.js";import{u as Je,e as Fe}from "./MainLayout-store-C26opbpP.js";import{_ as Rt}from "./_plugin-vue_export-helper-DlAUqK2U.js";const Wt=ie({name:"QToolbarTitle",props:{shrink:Boolean},setup(t, {slots:n}){const u=w(()=>"q-toolbar__title ellipsis"+(t.shrink===!0?" col-shrink":""));return()=>O("div",{class:u.value},Ce(n.default))}}),Xt=ie({name:"QToolbar",props:{inset:Boolean},setup(t, {slots:n}){const u=w(()=>"q-toolbar row no-wrap items-center"+(t.inset===!0?" q-toolbar--inset":""));return()=>O("div",{class:u.value,role:"toolbar"},Ce(n.default))}}),Yt=ie({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t, {slots:n,emit:u}){const{proxy:{$q:f}}=Pe(),e=Ae(Ne,R);if(e===R)return console.error("QHeader needs to be child of QLayout"),R;const a=V(parseInt(t.heightHint,10)),d=V(!0),m=w(()=>t.reveal===!0||e.view.value.indexOf("H")!==-1||f.platform.is.ios&&e.isContainer.value===!0),g=w(()=>{if(t.modelValue!==!0)return 0;if(m.value===!0)return d.value===!0?a.value:0;const p=a.value-e.scroll.value.position;return p>0?p:0}),r=w(()=>t.modelValue!==!0||m.value===!0&&d.value!==!0),l=w(()=>t.modelValue===!0&&r.value===!0&&t.reveal===!0),q=w(()=>"q-header q-layout__section--marginal "+(m.value===!0?"fixed":"absolute")+"-top"+(t.bordered===!0?" q-header--bordered":"")+(r.value===!0?" q-header--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus":"")),v=w(()=>{const p=e.rows.value.top,_={};return p[0]==="l"&&e.left.space===!0&&(_[f.lang.rtl===!0?"right":"left"]=`${e.left.size}px`),p[2]==="r"&&e.right.space===!0&&(_[f.lang.rtl===!0?"left":"right"]=`${e.right.size}px`),_});function s(p, _){e.update("header",p,_)}function b(p, _){p.value!==_&&(p.value=_)}function D({height:p}){b(a,p),s("size",p)}function x(p){l.value===!0&&b(d,!0),u("focusin",p)}S(()=>t.modelValue, p=>{s("space",p),b(d,!0),e.animate()}),S(g, p=>{s("offset",p)}),S(()=>t.reveal, p=>{p===!1&&b(d,t.modelValue)}),S(d, p=>{e.animate(),u("reveal",p)}),S(e.scroll, p=>{t.reveal===!0&&b(d,p.direction==="up"||p.position<=t.revealOffset||p.position-p.inflectionPoint<100)});const k={};return e.instances.header=k,t.modelValue===!0&&s("size",a.value),s("space",t.modelValue),s("offset",g.value),Ue(()=>{e.instances.header===k&&(e.instances.header=void 0,s("size",0),s("offset",0),s("space",!1))}),()=>{const p=pt(n.default,[]);return t.elevated===!0&&p.push(O("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),p.push(O(Nt,{debounce:0,onResize:D})),O("header",{class:q.value,style:v.value,onFocusin:x},p)}}}),qe={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},jt=Object.keys(qe);qe.all=!0;function Oe(t){const n={};for(const u of jt)t[u]===!0&&(n[u]=!0);return Object.keys(n).length===0?qe:(n.horizontal===!0?n.left=n.right=!0:n.left===!0&&n.right===!0&&(n.horizontal=!0),n.vertical===!0?n.up=n.down=!0:n.up===!0&&n.down===!0&&(n.vertical=!0),n.horizontal===!0&&n.vertical===!0&&(n.all=!0),n)}const Kt=["INPUT","TEXTAREA"];function Ee(t, n){return n.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof n.handler=="function"&&Kt.includes(t.target.nodeName.toUpperCase())===!1&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(n.uid)===-1)}function be(t, n, u){const f=_e(t);let e,a=f.left-n.event.x,d=f.top-n.event.y,m=Math.abs(a),g=Math.abs(d);const r=n.direction;r.horizontal===!0&&r.vertical!==!0?e=a<0?"left":"right":r.horizontal!==!0&&r.vertical===!0?e=d<0?"up":"down":r.up===!0&&d<0?(e="up",m>g&&(r.left===!0&&a<0?e="left":r.right===!0&&a>0&&(e="right"))):r.down===!0&&d>0?(e="down",m>g&&(r.left===!0&&a<0?e="left":r.right===!0&&a>0&&(e="right"))):r.left===!0&&a<0?(e="left",m<g&&(r.up===!0&&d<0?e="up":r.down===!0&&d>0&&(e="down"))):r.right===!0&&a>0&&(e="right",m<g&&(r.up===!0&&d<0?e="up":r.down===!0&&d>0&&(e="down")));let l=!1;if(e===void 0&&u===!1){if(n.event.isFirst===!0||n.event.lastDir===void 0)return{};e=n.event.lastDir,l=!0,e==="left"||e==="right"?(f.left-=a,m=0,a=0):(f.top-=d,g=0,d=0)}return{synthetic:l,payload:{evt:t,touch:n.event.mouse!==!0,mouse:n.event.mouse===!0,position:f,direction:e,isFirst:n.event.isFirst,isFinal:u===!0,duration:Date.now()-n.event.time,distance:{x:m,y:g},offset:{x:a,y:d},delta:{x:f.left-n.event.lastX,y:f.top-n.event.lastY}}}}let Zt=0;const we=ht({name:"touch-pan",beforeMount(t, {value:n,modifiers:u}){if(u.mouse!==!0&&Y.has.touch!==!0)return;function f(a, d){u.mouse===!0&&d===!0?bt(a):(u.stop===!0&&ye(a),u.prevent===!0&&Ie(a))}const e={uid:"qvtp_"+Zt++,handler:n,modifiers:u,direction:Oe(u),noop:gt,mouseStart(a){Ee(a,e)&&yt(a)&&(te(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(a,!0))},touchStart(a){if(Ee(a,e)){const d=a.target;te(e,"temp",[[d,"touchmove","move","notPassiveCapture"],[d,"touchcancel","end","passiveCapture"],[d,"touchend","end","passiveCapture"]]),e.start(a)}},start(a, d){if(Y.is.firefox===!0&&ge(t,!0),e.lastEvt=a,d===!0||u.stop===!0){if(e.direction.all!==!0&&(d!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const r=a.type.indexOf("mouse")!==-1?new MouseEvent(a.type,a):new TouchEvent(a.type,a);a.defaultPrevented===!0&&Ie(r),a.cancelBubble===!0&&ye(r),Object.assign(r,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:a.qClonedBy===void 0?[e.uid]:a.qClonedBy.concat(e.uid)}),e.initialEvent={target:a.target,event:r}}ye(a)}const{left:m,top:g}=_e(a);e.event={x:m,y:g,time:Date.now(),mouse:d===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:m,lastY:g}},move(a){if(e.event===void 0)return;const d=_e(a),m=d.left-e.event.x,g=d.top-e.event.y;if(m===0&&g===0)return;e.lastEvt=a;const r=e.event.mouse===!0,l=()=>{f(a,r);let s;u.preserveCursor!==!0&&u.preservecursor!==!0&&(s=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),r===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ot(),e.styleCleanup= b=>{if(e.styleCleanup=void 0,s!==void 0&&(document.documentElement.style.cursor=s),document.body.classList.remove("non-selectable"),r===!0){const D=()=>{document.body.classList.remove("no-pointer-events--children")};b!==void 0?setTimeout(()=>{D(),b()},50):D()}else b!==void 0&&b()}};if(e.event.detected===!0){e.event.isFirst!==!0&&f(a,e.event.mouse);const{payload:s,synthetic:b}=be(a,e,!1);s!==void 0&&(e.handler(s)===!1?e.end(a):(e.styleCleanup===void 0&&e.event.isFirst===!0&&l(),e.event.lastX=s.position.left,e.event.lastY=s.position.top,e.event.lastDir=b===!0?void 0:s.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||r===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){l(),e.event.detected=!0,e.move(a);return}const q=Math.abs(m),v=Math.abs(g);q!==v&&(e.direction.horizontal===!0&&q>v||e.direction.vertical===!0&&q<v||e.direction.up===!0&&q<v&&g<0||e.direction.down===!0&&q<v&&g>0||e.direction.left===!0&&q>v&&m<0||e.direction.right===!0&&q>v&&m>0?(e.event.detected=!0,e.move(a)):e.end(a,!0))},end(a, d){if(e.event!==void 0){if(he(e,"temp"),Y.is.firefox===!0&&ge(t,!1),d===!0)e.styleCleanup?.(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(be(a===void 0?e.lastEvt:a,e).payload);const{payload:m}=be(a===void 0?e.lastEvt:a,e,!0),g=()=>{e.handler(m)};e.styleCleanup!==void 0?e.styleCleanup(g):g()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(t.__qtouchpan=e,u.mouse===!0){const a=u.mouseCapture===!0||u.mousecapture===!0?"Capture":"";te(e,"main",[[t,"mousedown","mouseStart",`passive${a}`]])}Y.has.touch===!0&&te(e,"main",[[t,"touchstart","touchStart",`passive${u.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t, n){const u=t.__qtouchpan;u!==void 0&&(n.oldValue!==n.value&&(typeof value!="function"&&u.end(),u.handler=n.value),u.direction=Oe(n.modifiers))},beforeUnmount(t){const n=t.__qtouchpan;n!==void 0&&(n.event!==void 0&&n.end(),he(n,"main"),he(n,"temp"),Y.is.firefox===!0&&ge(t,!1),n.styleCleanup?.(),delete t.__qtouchpan)}}),$e=150,Gt=ie({name:"QDrawer",inheritAttrs:!1,props:{...kt,..._t,side:{type:String,default:"left",validator: t=>["left","right"].includes(t)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator: t=>["default","desktop","mobile"].includes(t),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...wt,"onLayout","miniState"],setup(t, {slots:n,emit:u,attrs:f}){const e=Pe(),{proxy:{$q:a}}=e,d=Ct(t,a),{preventBodyScroll:m}=Bt(),{registerTimeout:g,removeTimeout:r}=Vt(),l=Ae(Ne,R);if(l===R)return console.error("QDrawer needs to be child of QLayout"),R;let q,v=null,s;const b=V(t.behavior==="mobile"||t.behavior!=="desktop"&&l.totalWidth.value<=t.breakpoint),D=w(()=>t.mini===!0&&b.value!==!0),x=w(()=>D.value===!0?t.miniWidth:t.width),k=V(t.showIfAbove===!0&&b.value===!1?!0:t.modelValue===!0),p=w(()=>t.persistent!==!0&&(b.value===!0||tt.value===!0));function _(o, y){if(re(),o!==!1&&l.animate(),Q(0),b.value===!0){const I=l.instances[J.value];I?.belowBreakpoint===!0&&I.hide(!1),E(1),l.isContainer.value!==!0&&m(!0)}else E(0),o!==!1&&ve(!1);g(()=>{o!==!1&&ve(!0),y!==!0&&u("show",o)},$e)}function h(o, y){et(),o!==!1&&l.animate(),E(0),Q(U.value*x.value),me(),y!==!0?g(()=>{u("hide",o)},$e):r()}const{show:W,hide:C}=qt({showing:k,hideOnRouteChange:p,handleShow:_,handleHide:h}),{addToHistory:re,removeFromHistory:et}=St(k,C,p),G={belowBreakpoint:b,hide:C},z=w(()=>t.side==="right"),U=w(()=>(a.lang.rtl===!0?-1:1)*(z.value===!0?1:-1)),Se=V(0),H=V(!1),se=V(!1),Be=V(x.value*U.value),J=w(()=>z.value===!0?"left":"right"),de=w(()=>k.value===!0&&b.value===!1&&t.overlay===!1?t.miniToOverlay===!0?t.miniWidth:x.value:0),ce=w(()=>t.overlay===!0||t.miniToOverlay===!0||l.view.value.indexOf(z.value?"R":"L")!==-1||a.platform.is.ios===!0&&l.isContainer.value===!0),X=w(()=>t.overlay===!1&&k.value===!0&&b.value===!1),tt=w(()=>t.overlay===!0&&k.value===!0&&b.value===!1),at=w(()=>"fullscreen q-drawer__backdrop"+(k.value===!1&&H.value===!1?" hidden":"")),lt=w(()=>({backgroundColor:`rgba(0,0,0,${Se.value*.4})`})),xe=w(()=>z.value===!0?l.rows.value.top[2]==="r":l.rows.value.top[0]==="l"),ot=w(()=>z.value===!0?l.rows.value.bottom[2]==="r":l.rows.value.bottom[0]==="l"),nt=w(()=>{const o={};return l.header.space===!0&&xe.value===!1&&(ce.value===!0?o.top=`${l.header.offset}px`:l.header.space===!0&&(o.top=`${l.header.size}px`)),l.footer.space===!0&&ot.value===!1&&(ce.value===!0?o.bottom=`${l.footer.offset}px`:l.footer.space===!0&&(o.bottom=`${l.footer.size}px`)),o}),it=w(()=>{const o={width:`${x.value}px`,transform:`translateX(${Be.value}px)`};return b.value===!0?o:Object.assign(o,nt.value)}),ut=w(()=>"q-drawer__content fit "+(l.isContainer.value!==!0?"scroll":"overflow-auto")),rt=w(()=>`q-drawer q-drawer--${t.side}`+(se.value===!0?" q-drawer--mini-animate":"")+(t.bordered===!0?" q-drawer--bordered":"")+(d.value===!0?" q-drawer--dark q-dark":"")+(H.value===!0?" no-transition":k.value===!0?"":" q-layout--prevent-focus")+(b.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${D.value===!0?"mini":"standard"}`+(ce.value===!0||X.value!==!0?" fixed":"")+(t.overlay===!0||t.miniToOverlay===!0?" q-drawer--on-top":"")+(xe.value===!0?" q-drawer--top-padding":""))),st=w(()=>{const o=a.lang.rtl===!0?t.side:J.value;return[[we,vt,void 0,{[o]:!0,mouse:!0}]]}),dt=w(()=>{const o=a.lang.rtl===!0?J.value:t.side;return[[we,De,void 0,{[o]:!0,mouse:!0}]]}),ct=w(()=>{const o=a.lang.rtl===!0?J.value:t.side;return[[we,De,void 0,{[o]:!0,mouse:!0,mouseAllDir:!0}]]});function fe(){mt(b,t.behavior==="mobile"||t.behavior!=="desktop"&&l.totalWidth.value<=t.breakpoint)}S(b, o=>{o===!0?(q=k.value,k.value===!0&&C(!1)):t.overlay===!1&&t.behavior!=="mobile"&&q!==!1&&(k.value===!0?(Q(0),E(0),me()):W(!1))}),S(()=>t.side,(o, y)=>{l.instances[y]===G&&(l.instances[y]=void 0,l[y].space=!1,l[y].offset=0),l.instances[o]=G,l[o].size=x.value,l[o].space=X.value,l[o].offset=de.value}),S(l.totalWidth,()=>{(l.isContainer.value===!0||document.qScrollPrevented!==!0)&&fe()}),S(()=>t.behavior+t.breakpoint,fe),S(l.isContainer, o=>{k.value===!0&&m(o!==!0),o===!0&&fe()}),S(l.scrollbarWidth,()=>{Q(k.value===!0?0:void 0)}),S(de, o=>{$("offset",o)}),S(X, o=>{u("onLayout",o),$("space",o)}),S(z,()=>{Q()}),S(x, o=>{Q(),pe(t.miniToOverlay,o)}),S(()=>t.miniToOverlay, o=>{pe(o,x.value)}),S(()=>a.lang.rtl,()=>{Q()}),S(()=>t.mini,()=>{t.noMiniAnimation||t.modelValue===!0&&(ft(),l.animate())}),S(D, o=>{u("miniState",o)});function Q(o){o===void 0?oe(()=>{o=k.value===!0?0:x.value,Q(U.value*o)}):(l.isContainer.value===!0&&z.value===!0&&(b.value===!0||Math.abs(o)===x.value)&&(o+=U.value*l.scrollbarWidth.value),Be.value=o)}function E(o){Se.value=o}function ve(o){const y=o===!0?"remove":l.isContainer.value!==!0?"add":"";y!==""&&document.body.classList[y]("q-body--drawer-toggle")}function ft(){v!==null&&clearTimeout(v),e.proxy&&e.proxy.$el&&e.proxy.$el.classList.add("q-drawer--mini-animate"),se.value=!0,v=setTimeout(()=>{v=null,se.value=!1,e?.proxy?.$el?.classList.remove("q-drawer--mini-animate")},150)}function vt(o){if(k.value!==!1)return;const y=x.value,I=ae(o.distance.x,0,y);if(o.isFinal===!0){I>=Math.min(75,y)===!0?W():(l.animate(),E(0),Q(U.value*y)),H.value=!1;return}Q((a.lang.rtl===!0?z.value!==!0:z.value)?Math.max(y-I,0):Math.min(0,I-y)),E(ae(I/y,0,1)),o.isFirst===!0&&(H.value=!0)}function De(o){if(k.value!==!0)return;const y=x.value,I=o.direction===t.side,ee=(a.lang.rtl===!0?I!==!0:I)?ae(o.distance.x,0,y):0;if(o.isFinal===!0){Math.abs(ee)<Math.min(75,y)===!0?(l.animate(),E(1),Q(0)):C(),H.value=!1;return}Q(U.value*ee),E(ae(1-ee/y,0,1)),o.isFirst===!0&&(H.value=!0)}function me(){m(!1),ve(!0)}function $(o, y){l.update(t.side,o,y)}function mt(o, y){o.value!==y&&(o.value=y)}function pe(o, y){$("size",o===!0?t.miniWidth:y)}return l.instances[t.side]=G,pe(t.miniToOverlay,x.value),$("space",X.value),$("offset",de.value),t.showIfAbove===!0&&t.modelValue!==!0&&k.value===!0&&t["onUpdate:modelValue"]!==void 0&&u("update:modelValue",!0),Ve(()=>{u("onLayout",X.value),u("miniState",D.value),q=t.showIfAbove===!0;const o=()=>{(k.value===!0?_:h)(!1,!0)};if(l.totalWidth.value!==0){oe(o);return}s=S(l.totalWidth,()=>{s(),s=void 0,k.value===!1&&t.showIfAbove===!0&&b.value===!1?W(!1):o()})}),Ue(()=>{s?.(),v!==null&&(clearTimeout(v),v=null),k.value===!0&&me(),l.instances[t.side]===G&&(l.instances[t.side]=void 0,$("size",0),$("offset",0),$("space",!1))}),()=>{const o=[];b.value===!0&&(t.noSwipeOpen===!1&&o.push(He(O("div",{key:"open",class:`q-drawer__opener fixed-${t.side}`,"aria-hidden":"true"}),st.value)),o.push(Qe("div",{ref:"backdrop",class:at.value,style:lt.value,"aria-hidden":"true",onClick:C},void 0,"backdrop",t.noSwipeBackdrop!==!0&&k.value===!0,()=>ct.value)));const y=D.value===!0&&n.mini!==void 0,I=[O("div",{...f,key:""+y,class:[ut.value,f.class]},y===!0?n.mini():Ce(n.default))];return t.elevated===!0&&k.value===!0&&I.push(O("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),o.push(Qe("aside",{ref:"content",class:rt.value,style:it.value},I,"contentclose",t.noSwipeClose!==!0&&b.value===!0,()=>dt.value)),O("div",{class:"q-drawer-container"},o)}}}),Jt=ue({__name:"EssentialLink",props:{title:{},caption:{default:""},link:{default:"#"},icon:{default:""}},setup(t){return(n, u)=>(M(),N(Ke,{clickable:"",tag:"a",target:"_blank",href:n.link},{default:c(()=>[n.icon?(M(),N(K,{key:0,avatar:""},{default:c(()=>[i(P,{name:n.icon},null,8,["name"])]),_:1})):Re("",!0),i(K,null,{default:c(()=>[i(Z,null,{default:c(()=>[L(A(n.title),1)]),_:1}),i(Z,{caption:""},{default:c(()=>[L(A(n.caption),1)]),_:1})]),_:1})]),_:1},8,["href"]))}}),ea=ue({__name:"PurchaseForm",props:{modelValue:{type:[Boolean,null],default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(t){const n=Je(),u=Ge(),f=V({productId:"",quantity:"",price:"",receivedDate:new Date().toISOString().split("T")[0],expirationDate:"",supplierName:"凱亞良品",supplierId:1}),e=V([]),a=V(),d=V(!1),m=xt(t,"modelValue");Ve(async()=>{await g(),l(),Fe.on("product-added",()=>{g()})});async function g(){try{const{data:q}=await ke.get("/inventory/getProductNameOptions");e.value=q}catch(q){console.log("獲取商品列表失敗",q)}}async function r(){if(await a.value?.validate?.()){d.value=!0,console.log(f.value);try{await ke.post("/inventory/purchase",f.value),u.notify({color:"positive",message:"已新增進貨單",icon:"done",position:"top"}),m.value=!1,n.incrementInventoryBadge(),l(),Fe.emit("productBatch-added")}catch(v){console.error("送出失敗",v)}finally{d.value=!1}}}function l(){f.value={productId:"",quantity:"",price:"",receivedDate:new Date().toLocaleDateString("en-CA",{timeZone:"Asia/Taipei"}),expirationDate:"",supplierName:"凱亞良品",supplierId:1},oe(()=>{a.value?.resetValidation()})}return(q, v)=>(M(),N(We,{modelValue:m.value,"onUpdate:modelValue":v[6]||(v[6]= s=>m.value=s)},{default:c(()=>[i(je,{class:"q-pa-md shadow-4",style:{"min-width":"400px","max-width":"90vw"}},{default:c(()=>[i(ne,null,{default:c(()=>v[7]||(v[7]=[B("div",{class:"text-h6"},"新進貨單",-1)])),_:1,__:[7]}),i(j),i(ne,null,{default:c(()=>[i(Ze,{onSubmit:Xe(r,["prevent"]),class:"q-gutter-sm",ref_key:"formRef",ref:a,loading:d.value},{default:c(()=>[i(Et,{modelValue:f.value.productId,"onUpdate:modelValue":v[0]||(v[0]= s=>f.value.productId=s),label:"商品名稱",options:e.value,"option-value":"productId","option-label":"name",dense:"",filled:"","emit-value":"","map-options":"",rules:[s=>!!s||"必填"]},null,8,["modelValue","options","rules"]),i(F,{modelValue:f.value.quantity,"onUpdate:modelValue":v[1]||(v[1]= s=>f.value.quantity=s),label:"進貨數量",type:"number",dense:"",filled:"",rules:[s=>s>=0||"必須大於等於 0"]},null,8,["modelValue","rules"]),i(F,{modelValue:f.value.price,"onUpdate:modelValue":v[2]||(v[2]= s=>f.value.price=s),label:"進貨單價",type:"number",dense:"",filled:"",rules:[s=>s>=0||"必須大於等於 0"]},null,8,["modelValue","rules"]),i(F,{modelValue:f.value.supplierName,"onUpdate:modelValue":v[3]||(v[3]= s=>f.value.supplierName=s),label:"供應商名稱",dense:"",filled:"",rules:[s=>!!s||"必填"]},null,8,["modelValue","rules"]),i(F,{modelValue:f.value.receivedDate,"onUpdate:modelValue":v[4]||(v[4]= s=>f.value.receivedDate=s),label:"進貨日期",type:"date",dense:"",filled:"",rules:[s=>!!s||"必填"]},null,8,["modelValue","rules"]),i(F,{modelValue:f.value.expirationDate,"onUpdate:modelValue":v[5]||(v[5]= s=>f.value.expirationDate=s),label:"有效期限",type:"date",dense:"",filled:"",rules:[s=>!!s||"必填"]},null,8,["modelValue","rules"])]),_:1},8,["loading"])]),_:1}),i(Ye,{align:"right"},{default:c(()=>[i(T,{flat:"",label:"清空",color:"secondary",type:"button",onClick:l}),i(T,{label:"送出",color:"primary",loading:d.value,onClick:r},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ta=Dt("purchase",()=>{const t=V({supplier:"",item:"",quantity:1,price:0});return{formData:t,resetForm:()=>{t.value={supplier:"",item:"",quantity:1,price:0}}}}),aa=ue({__name:"InventoryForm",setup(t){const n=ta(),u=It(n,"formData"),f=V(),e=V(!1),a=V(!1);async function d(){if(await f.value?.validate?.()){e.value=!0;try{const r={supplierName:u.value.supplier,itemName:u.value.item,quantity:Number(u.value.quantity),unitPrice:Number(u.value.price)},{data:l}=await ke.post("/api/purchase",r);console.log("送出成功",l),a.value=!1,n.resetForm()}catch(r){console.error("送出失敗",r)}finally{e.value=!1}}}function m(){n.resetForm?.(),oe(()=>{f.value?.resetValidation()})}return(g, r)=>(M(),N(We,{modelValue:a.value,"onUpdate:modelValue":r[4]||(r[4]= l=>a.value=l)},{default:c(()=>[i(je,{class:"q-pa-md shadow-4",style:{"min-width":"400px","max-width":"90vw"}},{default:c(()=>[i(ne,null,{default:c(()=>r[5]||(r[5]=[B("div",{class:"text-h6"},"新增進貨單",-1)])),_:1,__:[5]}),i(j),i(ne,null,{default:c(()=>[i(Ze,{onSubmit:Xe(d,["prevent"]),class:"q-gutter-sm",ref_key:"formRef",ref:f},{default:c(()=>[i(F,{modelValue:u.value.supplier,"onUpdate:modelValue":r[0]||(r[0]= l=>u.value.supplier=l),label:"供應商名稱",dense:"",filled:"",rules:[l=>!!l||"必填"]},null,8,["modelValue","rules"]),i(F,{modelValue:u.value.item,"onUpdate:modelValue":r[1]||(r[1]= l=>u.value.item=l),label:"品項名稱",dense:"",filled:"",rules:[l=>!!l||"必填"]},null,8,["modelValue","rules"]),i(F,{modelValue:u.value.quantity,"onUpdate:modelValue":r[2]||(r[2]= l=>u.value.quantity=l),label:"數量",type:"number",dense:"",filled:"",rules:[l=>l>0||"必須大於 0"]},null,8,["modelValue","rules"]),i(F,{modelValue:u.value.price,"onUpdate:modelValue":r[3]||(r[3]= l=>u.value.price=l),label:"單價",type:"number",dense:"",filled:"",rules:[l=>l>=0||"不得為負數"]},null,8,["modelValue","rules"])]),_:1},512)]),_:1}),i(Ye,{align:"right"},{default:c(()=>[i(T,{flat:"",label:"清空",color:"secondary",type:"button",onClick:m}),i(T,{label:"送出",color:"primary",loading:e.value,onClick:d},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),la={class:"title-container"},oa={class:"action-buttons"},na={class:"user-section"},ia={class:"user-avatar"},ua={class:"user-info"},ra={class:"user-nickname"},sa={class:"user-username"},da={class:"menu-icon-container"},ca={class:"quick-actions"},fa={class:"quick-action-grid"},va={class:"quick-action-content"},ma={class:"quick-action-content"},pa={class:"drawer-footer"},ha={class:"version-info"},ga=ue({__name:"MainLayout",setup(t){const n=Je(),u=Ge(),f=V(!1),e=V(!1),a=V(!1),d=V(!1),m=V("light_mode"),g=V("訪客"),r=V("未登入");function l(){f.value=!0}function q(){e.value=!0}function v(){a.value=!0}const s=w(()=>[{to:"/",icon:"dashboard",title:"控制台",caption:"系統總覽與統計",badgeColor:"primary"},{to:"/inventory",icon:"inventory",title:"庫存管理",caption:"商品庫存與進出貨",badge:n.inventoryBadge,badgeColor:"secondary"},{to:"/orders",icon:"receipt_long",title:"訂單管理",caption:"訂單處理與追蹤",badge:n.ordersBadge,badgeColor:"warning"},{to:"/analytics",icon:"analytics",title:"數據分析",caption:"銷售報表與分析"},{to:"/settings",icon:"settings",title:"系統設定",caption:"偏好設定與配置"}]),b=[{title:"說明文件",caption:"使用手冊",icon:"help_outline",link:"https://google.com"},{title:"技術支援",caption:"聯繫客服",icon:"support_agent",link:"https://google.com"}],D=()=>{const _=localStorage.getItem("username"),h=localStorage.getItem("nickname");_?r.value=_:(localStorage.setItem("username","未登入"),r.value="未登入"),h?g.value=h:(localStorage.setItem("nickname","訪客"),g.value="訪客")},x= _=>{_.key==="username"&&_.newValue===null&&(localStorage.setItem("username","未登入"),r.value="未登入"),_.key==="nickname"&&_.newValue===null&&(localStorage.setItem("nickname","訪客"),g.value="訪客")};Qt(()=>{window.removeEventListener("storage",x),window.removeEventListener("logout",D)}),Ve(()=>{const _=localStorage.getItem("theme");_?(m.value=_,u.dark.set(_==="dark_mode")):(localStorage.setItem("theme","light_mode"),u.dark.set(!1)),D(),window.addEventListener("logout",D)}),S(m, _=>{localStorage.setItem("theme",_)});function k(){d.value=!d.value}const p=()=>{u.dark.toggle();const _=u.dark.isActive;m.value=_?"dark_mode":"light_mode",localStorage.setItem("theme",m.value)};return(_, h)=>{const W=Lt("router-view");return M(),N(Ht,{view:"lHh Lpr lFf"},{default:c(()=>[h[14]||(h[14]=B("div",{class:"gradient-bg"},null,-1)),i(Yt,{elevated:"",class:"modern-header"},{default:c(()=>[i(Xt,{class:"toolbar-container"},{default:c(()=>[i(T,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:k,class:"menu-btn"}),i(Wt,{class:"modern-title"},{default:c(()=>[B("div",la,[i(P,{name:"business",size:"md",class:"title-icon"}),h[6]||(h[6]=B("span",{class:"title-text"},"凱亞 ERP",-1)),i(Me,{outline:"",size:"sm",class:"beta-chip"},{default:c(()=>h[5]||(h[5]=[L("BETA")])),_:1,__:[5]})])]),_:1}),B("div",oa,[i(T,{flat:"",round:"",icon:"add_shopping_cart",size:"md",onClick:h[0]||(h[0]= C=>f.value=!0),class:"action-btn purchase-btn"},{default:c(()=>[i(le,{class:"modern-tooltip purchase-tooltip",offset:[10,10],"transition-show":"scale","transition-hide":"scale"},{default:c(()=>h[7]||(h[7]=[L(" 新增進貨單 ")])),_:1,__:[7]})]),_:1}),i(T,{flat:"",round:"",icon:"local_shipping",size:"md",onClick:q,class:"action-btn shipping-btn"},{default:c(()=>[i(le,{class:"modern-tooltip shipping-tooltip",offset:[10,10],"transition-show":"scale","transition-hide":"scale"},{default:c(()=>h[8]||(h[8]=[L(" 新增出貨單 ")])),_:1,__:[8]})]),_:1}),i(T,{flat:"",round:"",icon:"checklist",size:"md",onClick:v,class:"action-btn inventory-btn"},{default:c(()=>[i(le,{class:"modern-tooltip inventory-tooltip",offset:[10,10],"transition-show":"scale","transition-hide":"scale"},{default:c(()=>h[9]||(h[9]=[L(" 庫存盤點 ")])),_:1,__:[9]})]),_:1}),i(j,{vertical:"",inset:"",class:"btn-separator"}),i(T,{flat:"",onClick:p},{default:c(()=>[i(P,{name:m.value==="dark_mode"?"light_mode":"dark_mode"},null,8,["name"]),i(le,null,{default:c(()=>[L(A(m.value==="dark_mode"?"深色模式":"淺色模式"),1)]),_:1})]),_:1})])]),_:1})]),_:1}),i(Gt,{modelValue:d.value,"onUpdate:modelValue":h[1]||(h[1]= C=>d.value=C),"show-if-above":"",bordered:"",class:"modern-drawer",width:280},{default:c(()=>[B("div",na,[B("div",ia,[i(Tt,{size:"48px",class:"avatar-gradient"},{default:c(()=>[i(P,{name:"person",size:"24px"})]),_:1})]),B("div",ua,[B("div",ra,A(g.value),1),B("div",sa,A(r.value),1)])]),i(j,{class:"section-separator"}),i($t,{class:"navigation-menu"},{default:c(()=>[(M(!0),Le(Te,null,ze(s.value,(C, re)=>He((M(),N(Ke,{key:C.to,to:C.to,clickable:"",exact:"","active-class":"modern-active",class:zt(["menu-item",`menu-item-${re}`])},{default:c(()=>[i(K,{avatar:""},{default:c(()=>[B("div",da,[i(P,{name:C.icon,size:"sm"},null,8,["name"])])]),_:2},1024),i(K,null,{default:c(()=>[i(Z,{class:"menu-title"},{default:c(()=>[L(A(C.title),1)]),_:2},1024),i(Z,{caption:"",class:"menu-caption"},{default:c(()=>[L(A(C.caption),1)]),_:2},1024)]),_:2},1024),C.badge?(M(),N(K,{key:0,side:""},{default:c(()=>[i(Pt,{color:C.badgeColor,rounded:""},{default:c(()=>[L(A(C.badge),1)]),_:2},1032,["color"])]),_:2},1024)):Re("",!0)]),_:2},1032,["to","class"])),[[Mt,{color:"primary"}]])),128))]),_:1}),i(j,{class:"section-separator"}),B("div",ca,[i(Z,{header:"",class:"menu-header"},{default:c(()=>[i(P,{name:"flash_on",size:"sm",class:"header-icon"}),h[10]||(h[10]=L(" 快速操作 "))]),_:1,__:[10]}),B("div",fa,[i(T,{flat:"",class:"quick-action-btn",onClick:l},{default:c(()=>[B("div",va,[i(P,{name:"add_shopping_cart",size:"md"}),h[11]||(h[11]=B("span",null,"進貨",-1))])]),_:1}),i(T,{flat:"",class:"quick-action-btn",onClick:q},{default:c(()=>[B("div",ma,[i(P,{name:"local_shipping",size:"md"}),h[12]||(h[12]=B("span",null,"出貨",-1))])]),_:1})])]),B("div",pa,[(M(),Le(Te,null,ze(b, C=>i(Jt,Ft({key:C.title},{ref_for:!0},C,{class:"footer-link"}),null,16)),64)),B("div",ha,[i(Me,{outline:"",size:"xs",color:"grey"},{default:c(()=>h[13]||(h[13]=[L("v2.0.1")])),_:1,__:[13]})])])]),_:1},8,["modelValue"]),i(ea,{modelValue:f.value,"onUpdate:modelValue":h[2]||(h[2]= C=>f.value=C)},null,8,["modelValue"]),i(At,{modelValue:e.value,"onUpdate:modelValue":h[3]||(h[3]= C=>e.value=C)},null,8,["modelValue"]),i(aa,{modelValue:a.value,"onUpdate:modelValue":h[4]||(h[4]= C=>a.value=C)},null,8,["modelValue"]),i(Ut,{class:"modern-page-container"},{default:c(()=>[i(W)]),_:1})]),_:1,__:[14]})}}}),xa=Rt(ga,[["__scopeId","data-v-3c4b6063"]]);export{xa as default};
